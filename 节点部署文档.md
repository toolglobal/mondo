# Mondo 节点部署文档
## 服务器准备
建议：4核+8G内存+500G SSD

## 部署链节点
- 创建目录:/app/mondo/blockchain，拷贝链程序mondo到/app/mondo/blockchain
- 初始化节点配置:`./mondo --home=.mondo init`
- 修改创世文件：/app/mondo/blockchain/.mondo/config/genensis.json为以下内容：
```
{
  "genesis_time": "2018-08-27T00:00:00.000000000Z",
  "chain_id": "OLOV3",
  "genesis_accounts": [{
    "address": "0x8dC63E255Ce7AF468f67FA6B17B054CECA72BC2d",
    "amount": "100000000000000000"
  }],
  "consensus_params": {
    "block_size": {
      "max_bytes": "22020096",
      "max_gas": "-1"
    },
    "evidence": {
      "max_age": "100000"
    },
    "validator": {
      "pub_key_types": [
        "ed25519"
      ]
    }
  },
  "validators": [
    {
      "address": "0BA034E7C5D4B99323427CE5FEF30FAAFCB78F02",
      "pub_key": {
        "type": "tendermint/PubKeyEd25519",
        "value": "TKauEYAucxigsuUP76NgQF0gZ41+eUdxcf396jxGmqY="
      },
      "power": "10",
      "name": ""
    },
    {
      "address": "AB4445F1E160A83A85990324E3F64A76E2A098FA",
      "pub_key": {
        "type": "tendermint/PubKeyEd25519",
        "value": "rtwTFfyO5swme14VfHIVHDd8veqUGABbpEUC68Hu6Hc="
      },
      "power": "10",
      "name": ""
    },
    {
      "address": "679C0E161B0326DA71C332115F9EC98AF97FF63C",
      "pub_key": {
        "type": "tendermint/PubKeyEd25519",
        "value": "Ym11X2yljTv26bnOPgzjvuZiuSxR+CcOvmfRh5qQtAI="
      },
      "power": "10",
      "name": ""
    },
    {
      "address": "FD884C1BB5F04669687F3062A2B2E0C58A1B24AC",
      "pub_key": {
        "type": "tendermint/PubKeyEd25519",
        "value": "Pum8PQQFUQCX0V2sfQ9uSTo336hHGE565TwJ/O8cefs="
      },
      "power": "10",
      "name": ""
    }
  ],
  "app_hash": ""
}
```
- 修改配置文件/app/mondo/blockchain/.mondo/config/config.toml中以下项：
```
create_empty_blocks_interval = "60s"
seeds='0BA034E7C5D4B99323427CE5FEF30FAAFCB78F02@18.139.250.111:26656,AB4445F1E160A83A85990324E3F64A76E2A098FA@18.140.180.203:26656,679C0E161B0326DA71C332115F9EC98AF97FF63C@13.228.188.50:26656,FD884C1BB5F04669687F3062A2B2E0C58A1B24AC@18.138.87.101:26656'
prometheus = true
```
- 防火墙开放TCP端口：26656(P2P),26660(prometheus)，将服务器IP告知我们加入IP白名单
- 启动：`nohup ./mondo --home=.mondo node &`，查询nohup日志保证区块同步正常，无错误
- 将节点公钥和地址告知我们进行开户，文件/app/mondo/blockchain/.mondo/config/priv_validator_key.json中pub_key.value项、address项。

## 部署API程序【可选】
api程序对外提供HTTP接口，将用户请求转为RPC调用链节点。

- 创建工作目录:/app/mondo/api，将程序拷贝到此目录
- 修改配置文件 config.toml
```
bind = ":8889" #对外提供的HTTP服务端口
rpc = "127.0.0.1:26657" #链RPC地址
dev = false #默认
metrics = true #默认
startHeight = 1 #默认
versions = [3] #默认，生成v3版本转账记录
```
- 运行:`sh run.sh`
- 本地API文档：`http://127.0.0.1:8889/docs/`
- 区块浏览器:https://www.olo.network